"0","library(tmcn)"
"2","Warning message:
"
"2","closing unused connection 3 (https://www.ptt.cc/bbs/elderly/index1.html) 
"
"0","library(rvest)"
"0","library(xml2)"
"0","pttTestFunction <- function(URL, filename)"
"0","{"
"0","  #URL   = ""https://www.ptt.cc/bbs/elderly/index.html"""
"0","  html  = read_html(URL)"
"0","  title = html_nodes(html, ""a"")"
"0","  href  = html_attr(title, ""href"")"
"0","  data = data.frame(title = toUTF8(html_text(title)),"
"0","                    href = href)"
"0","  data = data[-c(1:10),]"
"0","  getContent <- function(x) {"
"0","    url  = paste0(""https://www.ptt.cc"", x)"
"0","    tag  = html_node(read_html(url), 'div#main-content.bbs-screen.bbs-content')"
"0","    text = toUTF8(html_text(tag))"
"0","  }"
"0","  #getContent(data$href[1])"
"0","  allText = sapply(data$href, getContent)"
"0","  allText"
"0","  #out <- file(filename, ""w"", encoding=""BIG-5"") "
"0","  #close(out) "
"0","}"
"0","source('pttTestFunction.R')"
"0","id = c(1:10)"
"0","URL = paste0(""https://www.ptt.cc/bbs/elderly/index"", id, "".html"")"
"0","filename = paste0(id, "".txt"")"
"0","pttTestFunction(URL[1], filename[1])"
"0","mapply(pttTestFunction, "
"0","       URL = URL, filename = filename)"
"2","
"
